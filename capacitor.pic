## CAPACITORS ############################################

# ========================================================
# Interface
# ========================================================

define capacitor {
# $1 = name, C1
# $2 = value, 1n
# $3 = orientation, one of [lrud]

  if ("$3" == "r" || "$3" == "l") then {
    capacitorH($1,$2,$3)
  } else {
    capacitorV($1,$2,$3)
  }
}

# ========================================================
# Horizontal capacitors
# ========================================================

define capacitorH {
  if ("$3" == "r") then {
    right
    capacitorRL($1,$2,$3)
  } else {
    left
    capacitorRL($1,$2,$3)
  }
}

define capacitorRL {
  linethick = 1
$1: [
    # Symbol
    line 0.275
    { move up 0.1; line down 0.2 }
    box invis ht 0.1 wid 0.05
    { BODY: box invis ht 0.35 wid 0.1 with .c at last box.c }
    { move up 0.1; line down 0.2 }
    line 0.275
    
    # Labels
    {
      if ("$2" != "") then {
        "$1" "$2" "" at BODY.n
      } else {
        "$1" at BODY.n
      }
    }
  ]  
}

# ========================================================
# Vertical capacitors
# ========================================================

define capacitorV {
  if ("$3" == "d" || "$3" == "dl") then {
    down
    capacitorUD($1,$2,$3)
  } else {
    up
    capacitorUD($1,$2,$3)
  }
}

# Vertical downwards -------------------------------------

define capacitorUD {
  linethick = 1
$1: [
    # Symbol
    line 0.275
    { move left 0.1; line right 0.2 }
    box invis ht 0.05 wid 0.1
    { BODY: box invis ht 0.1 wid 0.45 with .c at last box.c }
    { move left 0.1; line right 0.2 }
    line 0.275
    
    # Labels
    {
      if ("$3" == "dl") then {
        if ("$2" != "") then {
          "$1" "$2" at BODY.w
        } else {
          "$1" at BODY.w
        }
      } else {
        if ("$2" != "") then {
          "$1" "$2" at BODY.e
        } else {
          "$1" at BODY.e
        }
      }  
    }
  ]  
}

##########################################################
