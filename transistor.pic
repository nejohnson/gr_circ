## TRANSISTORS ###########################################

# ========================================================
# Interface
# ========================================================

define npn {
# $1 = name, Q1
# $2 = value, BC108
# $3 = orientation, l,r

  if ("$3" == "r") then {
    npnR($1,$2,$3)
  }
  if ("$3" == "l") then {
    npnL($1,$2,$3)
  }
  if ("$3" == "u") then {
    npnU($1,$2,$3)
  }
  if ("$3" == "d") then {
    npnD($1,$2,$3)
  }
}

# ========================================================

define npnR {
  linethick = 1
  {
  right
$1: [
    { B: box invis wid 0 ht 0 }
    line 0.2
    box wid 0.03 ht 0.3 fill 1 with .c at Here
    circle thick 1.5 rad 0.25 with .c at 2nd box .c + (0.05,0)
    { line from last box.c right 0.2 up 0.2
      C: box invis wid 0 ht 0
    }
    { arrow wid 0.1 from 2nd last box.c right 0.2 down 0.2
      E: box invis wid 0 ht 0
    }
    { "$1" at last circle.e + (0.1,0.1) ljust
      if("$2" != "") then {
        "$2" at last circle.e + (0.1,-0.1) ljust
      }
    }
  ]
  }
}

# ========================================================

define npnL {
  linethick = 1
  {
  left
$1: [
    { B: box invis wid 0 ht 0 }
    line 0.2
    box wid 0.03 ht 0.3 fill 1 with .c at Here
    circle thick 1.5 rad 0.25 with .c at 2nd box .c - (0.05,0)
    { line from last box.c left 0.2 up 0.2
      C: box invis wid 0 ht 0
    }
    { arrow wid 0.1 from 2nd last box.c left 0.2 down 0.2
      E: box invis wid 0 ht 0
    }
    {
      "$1" at last circle.w + (-0.1,0.1) rjust
      if("$2"!="") then {
        "$2" at last circle.w + (-0.1,-0.1) rjust
      }
    }
  ]
  }
}

# ========================================================

define npnU {
  linethick = 1
  {
  up
$1: [
    { B: box invis wid 0 ht 0 }
    line 0.2
    box wid 0.3 ht 0.03 fill 1 with .c at Here
    circle thick 1.5 rad 0.25 with .c at 2nd box .c + (0, 0.05)
    { line from last box.c left 0.2 up 0.2
      C: box invis wid 0 ht 0
    }
    { arrow wid 0.1 from 2nd last box.c right 0.2 up 0.2
      E: box invis wid 0 ht 0
    }
    {
      "$1   " at last circle.w + (0,0.1) rjust
      if("$2" != "") then {
        "$2   " at last circle.w + (0,-0.1) rjust
      }
    }
  ]
  }
}

# ========================================================

define npnD {
  linethick = 1
  {
  down
$1: [
    { B: box invis wid 0 ht 0 }
    line 0.2
    box wid 0.3 ht 0.03 fill 1 with .c at Here
    circle thick 1.5 rad 0.25 with .c at 2nd box .c - (0, 0.05)
    { line from last box.c right 0.2 down 0.2
      C: box invis wid 0 ht 0
    }
    { arrow wid 0.1 from 2nd last box.c left 0.2 down 0.2
      E: box invis wid 0 ht 0
    }
    {
      "$1   " at last circle.w + (0, 0.1) rjust
      if ( "$2" != "" ) then {
        "$2   " at last circle.w + (0, -0.1) rjust
      }
    }
  ]
  }
}

# ========================================================
